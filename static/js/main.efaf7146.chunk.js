(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{33:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),o=n.n(c),i=(n(33),n(4)),s=n.n(i),l=n(11),u=n(8),h=n(21),d=n(22),g=n(27),b=n(25),j=(n(35),n(9)),m=n(23),f=n.n(m),p=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://pixabay.com/api/?q=".concat(t,"&page=").concat(n,"&key=21904508-8c5f9bb97b16d01f890abadf2&image_type=photo&orientation=horizontal&per_page=12"));case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=n(12),x=n(28),v=(n(54),n(1)),y=["children","onClick"],k=function(e){var t=e.children,n=e.onClick,a=Object(x.a)(e,y);return Object(v.jsx)("button",Object(O.a)(Object(O.a)({type:"button",className:"iconButton",onClick:n},a),{},{children:t}))};k.defaultProps={onClick:function(){return null},children:null};var w=k,C=(n(56),function(e){var t=e.image,n=e.onImageClick;return Object(v.jsx)("li",{className:"ImageGalleryItem",children:Object(v.jsx)("img",{src:t.webformatURL,alt:t.tags,onClick:function(){return n(t.largeImageURL)},width:"250",height:"150"})})});C.defaultProps={tags:""};var I=C,S=(n(57),function(e){var t=e.images,n=e.onImageClick;return Object(v.jsx)("ul",{className:"gallery list",children:t.map((function(e){return Object(v.jsx)(I,{image:e,onImageClick:n},e.id)}))})}),N=(n(58),function(e){var t=e.onClick;return Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})}),L=n(26),M=(n(59),function(e){var t=e.onSearch,n=Object(a.useState)(""),r=Object(L.a)(n,2),c=r[0],o=r[1],i=function(){return o("")};return Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c.trim()&&(t(c),i())},className:"SearchForm",children:[Object(v.jsx)("button",{type:"submit",className:"buttonForm",children:Object(v.jsx)(j.b,{width:"20px",height:"20px",fill:"#7e7b7b"})}),Object(v.jsx)("input",{type:"text",className:"input",name:"query",value:c,onChange:function(e){var t=e.currentTarget.value;o(t)},autoComplete:"off",autoFocus:!0})]})}),P=(n(60),function(e){var t=e.onSubmit;return Object(v.jsx)("header",{className:"SearchBar",children:Object(v.jsx)(M,{onSearch:t})})}),B=n(24),F=n.n(B),Q=function(){return Object(v.jsx)("div",{children:Object(v.jsx)(F.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})})},E=(n(81),document.querySelector("#modal-root")),q=function(e){var t=e.children,n=e.onClose;Object(a.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&n()};return Object(c.createPortal)(Object(v.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&n()},children:Object(v.jsx)("div",{className:"Modal",children:t})}),E)};q.defaultProps={children:null};var G=q,T=function(e){Object(g.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={images:[],currentPage:1,searchQuery:"",isLoading:!1,showModal:!1,largeImage:"",error:null},e.onChangeQuery=function(t){e.setState({images:[],currentPage:1,searchQuery:t,error:null})},e.getImages=Object(u.a)(s.a.mark((function t(){var n,a,r,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.currentPage,r=n.searchQuery,e.setState({isLoading:!0}),t.prev=2,t.next=5,p(r,a);case 5:c=t.sent,o=c.hits,e.setState((function(e){return{images:[].concat(Object(l.a)(e.images),Object(l.a)(o)),currentPage:e.currentPage+1}})),1!==a&&e.scrollOnLoadButton(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.setState({error:t.t0});case 14:return t.prev=14,e.setState({isLoading:!1}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])}))),e.handleGalleryItem=function(t){e.setState({largeImage:t,showModal:!0})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal,largeImage:""}}))},e.scrollOnLoadButton=function(){window.scrollTo({top:document.documentElement.offsetHeight,behavior:"smooth",block:"end"})},e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.getImages()}},{key:"render",value:function(){var e=this.state,t=e.images,n=e.showModal,a=e.largeImage,r=e.isLoading,c=t.length>0&&t.length>=12;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(P,{onSubmit:this.onChangeQuery}),Object(v.jsx)(S,{images:t,onImageClick:this.handleGalleryItem}),c&&Object(v.jsx)(N,{onClick:this.getImages}),n&&Object(v.jsxs)(G,{onClose:this.toggleModal,children:[Object(v.jsx)("div",{className:"Close-box",children:Object(v.jsx)(w,{onClick:this.toggleModal,"aria-label":"Close modal",children:Object(v.jsx)(j.a,{width:"20px",height:"20px",fill:"#7e7b7b"})})}),Object(v.jsx)("img",{src:a,alt:"",className:"Modal-image"})]}),r&&Object(v.jsx)(Q,{})]})}}]),n}(r.a.Component);o.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(T,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.efaf7146.chunk.js.map